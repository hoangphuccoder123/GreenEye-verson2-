# ğŸ”„ SÆ¡ Äá»“ Luá»“ng AI - Green Eye

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ğŸ‘¤ User       â”‚
â”‚  Upload Image   â”‚
â”‚   + Location    â”‚
â”‚  + Description  â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“ add_point   â”‚
â”‚     .php        â”‚
â”‚                 â”‚
â”‚ âœ“ Save image    â”‚
â”‚ âœ“ Convert base64â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ¤– LMStudio     â”‚
â”‚   Service.php   â”‚
â”‚                 â”‚
â”‚ â€¢ Prepare payloadâ”‚
â”‚ â€¢ Send to AI    â”‚
â”‚ â€¢ Parse responseâ”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸŒ AI Server    â”‚
â”‚ vnpthaiphong.vn â”‚
â”‚     :1234       â”‚
â”‚                 â”‚
â”‚ Model: gemma-3  â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â–¼ 
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“‹ AI Response  â”‚
â”‚                 â”‚
â”‚ {               â”‚
â”‚  "image_type":  â”‚
â”‚    "trash",     â”‚
â”‚  "pollution_    â”‚
â”‚    level": 2    â”‚
â”‚ }               â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âš–ï¸ Validation   â”‚
â”‚                 â”‚
â”‚ image_type =    â”‚
â”‚ "trash"? â”€â”€â”    â”‚
â”‚            â”‚    â”‚
â”‚     YES â”€â”€â”€â”€â”˜    â”‚
â”‚            â”‚    â”‚
â”‚     NO â”€â”€â”€â”€â”€X    â”‚ (Reject & Delete)
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ’¾ Database     â”‚
â”‚                 â”‚
â”‚ â€¢ trash_points  â”‚
â”‚ â€¢ ai_analysis   â”‚
â”‚ â€¢ ai_verified   â”‚
â”‚ â€¢ image_url     â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“± Frontend     â”‚
â”‚   Display       â”‚
â”‚                 â”‚
â”‚ â€¢ List view     â”‚
â”‚ â€¢ Map markers   â”‚
â”‚ â€¢ AI badges     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¯ Decision Points

```
AI Analysis Result
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ image_type?      â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
      â”‚     â”‚
"trash"â”‚     â”‚"irrelevant"
      â”‚     â”‚
      â–¼     â–¼
   âœ… SAVE   âŒ REJECT
      â”‚        â”‚
      â–¼        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚pollutionâ”‚ â”‚ Delete  â”‚
â”‚ level?  â”‚ â”‚ image   â”‚
â””â”¬â”€â”¬â”€â”¬â”€â”¬â”€â”€â”˜ â”‚ & show  â”‚
 â”‚ â”‚ â”‚ â”‚    â”‚ error   â”‚
 1 2 3 4    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 â”‚ â”‚ â”‚ â”‚
 â–¼ â–¼ â–¼ â–¼
ğŸŸ¢ğŸŸ¡ğŸŸ ğŸ”´
```

## ğŸ“Š Data Flow

```
User Input           AI Processing         Database Storage
    â”‚                     â”‚                      â”‚
    â–¼                     â–¼                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Image   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ Base64  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ BLOB    â”‚
â”‚ File    â”‚          â”‚ Encode  â”‚           â”‚ Storage â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚                     â”‚                      â”‚
    â–¼                     â–¼                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ GPS     â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ Validateâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ lat/lng â”‚
â”‚ Coords  â”‚          â”‚ Format  â”‚           â”‚ DECIMAL â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚                     â”‚                      â”‚
    â–¼                     â–¼                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Text    â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ Sanitizeâ”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ VARCHAR â”‚
â”‚ Desc    â”‚          â”‚ & Escapeâ”‚           â”‚ (255)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

